<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Benchmark: DOM Insertion</title>
    <style>
        .falling-item {
            position: absolute;
            top: -50px;
        }
    </style>
</head>
<body>
    <h1>Benchmark: Batch DOM Updates</h1>
    <div id="results"></div>
    <div id="overlay"></div>

    <script>
        const overlay = document.getElementById('overlay');
        const resultsDiv = document.getElementById('results');
        const items = ['ğŸ“¿', 'ğŸ­', 'âšœï¸', 'ğŸ·', 'ğŸº', 'ğŸŠ', 'ğŸŸ£', 'ğŸŸ¢', 'ğŸŸ¡'];
        const COUNT = 1000; // Increased count to make difference more visible

        function runUnoptimized() {
            overlay.innerHTML = '';
            const start = performance.now();

            for (let i = 0; i < COUNT; i++) {
                const item = document.createElement('div');
                item.classList.add('falling-item');
                item.innerText = items[Math.floor(Math.random() * items.length)];
                item.style.left = Math.random() * 100 + 'vw';
                overlay.appendChild(item);
            }

            const end = performance.now();
            return end - start;
        }

        function runOptimized() {
            overlay.innerHTML = '';
            const start = performance.now();

            const fragment = document.createDocumentFragment();
            for (let i = 0; i < COUNT; i++) {
                const item = document.createElement('div');
                item.classList.add('falling-item');
                item.innerText = items[Math.floor(Math.random() * items.length)];
                item.style.left = Math.random() * 100 + 'vw';
                fragment.appendChild(item);
            }
            overlay.appendChild(fragment);

            const end = performance.now();
            return end - start;
        }

        // Run tests
        setTimeout(() => {
            const timeUnoptimized = runUnoptimized();
            const timeOptimized = runOptimized();

            resultsDiv.innerHTML = `
                <p>Unoptimized (Direct appendChild): ${timeUnoptimized.toFixed(2)} ms</p>
                <p>Optimized (DocumentFragment): ${timeOptimized.toFixed(2)} ms</p>
                <p>Speedup: ${(timeUnoptimized / timeOptimized).toFixed(2)}x</p>
            `;

            console.log(`Unoptimized: ${timeUnoptimized.toFixed(2)} ms`);
            console.log(`Optimized: ${timeOptimized.toFixed(2)} ms`);
        }, 1000);
    </script>
</body>
</html>
